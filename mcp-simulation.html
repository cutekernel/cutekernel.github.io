<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP Server Simulation - Cyber Space</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        .simulation-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .tutorial-panel {
            background: rgba(10, 10, 10, 0.8);
            border: 1px solid var(--primary);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .tutorial-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .tutorial-header h3 {
            color: var(--accent);
            margin: 0;
        }

        .tutorial-progress {
            color: var(--text);
            font-size: 0.9rem;
        }

        .tutorial-content {
            color: var(--text);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .tutorial-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .tutorial-button {
            background: var(--primary);
            color: var(--text);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Share Tech Mono', monospace;
            transition: background 0.3s ease;
        }

        .tutorial-button:hover {
            background: var(--accent);
        }

        .tutorial-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .simulation-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .config-panel {
            background: rgba(10, 10, 10, 0.8);
            border: 1px solid var(--primary);
            border-radius: 8px;
            padding: 1.5rem;
            opacity: 0.5;
            transition: opacity 0.3s ease;
        }

        .config-panel.active {
            opacity: 1;
        }

        .config-panel h3 {
            color: var(--accent);
            margin-bottom: 1rem;
        }

        .config-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group label {
            color: var(--text);
            font-size: 0.9rem;
        }

        .form-group input[type="checkbox"] {
            width: 1rem;
            height: 1rem;
        }

        .form-group input[type="number"] {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--primary);
            color: var(--text);
            padding: 0.5rem;
            border-radius: 4px;
            font-family: 'Share Tech Mono', monospace;
        }

        .simulation-panel {
            background: rgba(10, 10, 10, 0.8);
            border: 1px solid var(--primary);
            border-radius: 8px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
        }

        .simulation-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .simulation-button {
            background: var(--primary);
            color: var(--text);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Share Tech Mono', monospace;
            transition: background 0.3s ease;
        }

        .simulation-button:hover {
            background: var(--accent);
        }

        .simulation-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .log-panel {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--primary);
            border-radius: 4px;
            padding: 1rem;
            flex: 1;
            overflow-y: auto;
            max-height: 300px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9rem;
        }

        .log-entry {
            color: var(--text);
            margin-bottom: 0.5rem;
            padding: 0.25rem;
            border-left: 2px solid var(--primary);
        }

        .log-entry.error {
            color: #ff4444;
            border-left-color: #ff4444;
        }

        .log-entry.success {
            color: #44ff44;
            border-left-color: #44ff44;
        }

        .log-entry.info {
            color: var(--accent);
            border-left-color: var(--accent);
        }

        .concept-highlight {
            color: var(--accent);
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .simulation-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 class="glitch" data-text="MCP SIMULATION">MCP SIMULATION</h1>
            <div class="terminal">
                <div class="terminal-header">
                    <span class="terminal-title">root@cyberspace:~#</span>
                    <a href="index.html" class="nav-link">[home]</a>
                    <a href="simulations.html" class="nav-link">[simulations]</a>
                </div>
                <div class="terminal-content">
                    <p class="typing">Initializing MCP Server Simulation...</p>
                </div>
            </div>
        </header>
        <main>
            <div class="simulation-container">
                <div class="tutorial-panel">
                    <div class="tutorial-header">
                        <h3 id="tutorialTitle">Welcome to MCP Server Simulation</h3>
                        <span class="tutorial-progress" id="tutorialProgress">Step 1 of 6</span>
                    </div>
                    <div class="tutorial-content" id="tutorialContent">
                        Welcome to the Model Context Protocol (MCP) Server Simulation! This interactive tutorial will guide you through the core concepts of MCP, helping you understand how models and context providers communicate through a server.
                    </div>
                    <div class="tutorial-actions">
                        <button class="tutorial-button" id="startTutorial">Start Tutorial</button>
                    </div>
                </div>

                <div class="simulation-grid">
                    <div class="config-panel" id="configPanel">
                        <h3>Server Configuration</h3>
                        <form class="config-form" id="serverConfig">
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" name="allowDynamicBinding" id="allowDynamicBinding">
                                    Allow Dynamic Binding
                                </label>
                            </div>
                            <div class="form-group">
                                <label for="maxBindings">Max Bindings</label>
                                <input type="number" id="maxBindings" name="maxBindings" min="1" max="10" value="5">
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" name="enableLogging" id="enableLogging" checked>
                                    Enable Logging
                                </label>
                            </div>
                            <button type="submit" class="simulation-button" id="configureServer">Configure Server</button>
                        </form>
                    </div>

                    <div class="simulation-panel">
                        <div class="simulation-controls">
                            <button class="simulation-button" id="createModel" disabled>Create Model</button>
                            <button class="simulation-button" id="createProvider" disabled>Create Provider</button>
                            <button class="simulation-button" id="bindModel" disabled>Bind Model</button>
                            <button class="simulation-button" id="resetSimulation">Reset</button>
                        </div>
                        <div class="log-panel" id="logPanel">
                            <div class="log-entry info">Welcome to the MCP Server Simulation</div>
                            <div class="log-entry info">Click 'Start Tutorial' to begin your learning journey</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <footer>
            <p class="matrix-text">01010100 01101000 01100101 00100000 01100111 01110010 01101001 01100100 00100000 01101001 01110011 00100000 01110111 01100001 01110100 01100011 01101000 01101001 01101110 01100111</p>
        </footer>
    </div>

    <script>
        // Tutorial steps
        const tutorialSteps = [
            {
                title: "Welcome to MCP Server Simulation",
                content: "Welcome to the Model Context Protocol (MCP) Server Simulation! This interactive tutorial will guide you through the core concepts of MCP, helping you understand how models and context providers communicate through a server.",
                action: "startTutorial"
            },
            {
                title: "Understanding Models",
                content: "In MCP, a <span class='concept-highlight'>Model</span> is a client that needs context to function. For example, a smart thermostat needs weather data to adjust the temperature. Let's create your first model!",
                action: "createModel",
                buttonText: "Create Model"
            },
            {
                title: "Understanding Context Providers",
                content: "A <span class='concept-highlight'>Context Provider</span> is a service that supplies data to models. For instance, a weather API can provide temperature data to our thermostat. Let's create a context provider!",
                action: "createProvider",
                buttonText: "Create Provider"
            },
            {
                title: "Server Configuration",
                content: "The MCP server acts as a mediator between models and providers. It enforces rules like maximum bindings and dynamic binding permissions. Configure the server to proceed.",
                action: "configureServer",
                buttonText: "Configure Server"
            },
            {
                title: "Creating Bindings",
                content: "A <span class='concept-highlight'>Binding</span> connects a model to a context provider. The server validates these connections based on its configuration. Let's create your first binding!",
                action: "bindModel",
                buttonText: "Bind Model"
            },
            {
                title: "Congratulations!",
                content: "You've completed the MCP tutorial! You can now experiment with different configurations, create more models and providers, and observe how the system behaves under different conditions.",
                action: "completeTutorial",
                buttonText: "Start Free Play"
            }
        ];

        // Simulation state
        let currentStep = 0;
        let serverConfigured = false;
        let models = [];
        let providers = [];
        let bindings = [];

        // DOM Elements
        const tutorialTitle = document.getElementById('tutorialTitle');
        const tutorialContent = document.getElementById('tutorialContent');
        const tutorialProgress = document.getElementById('tutorialProgress');
        const startTutorialBtn = document.getElementById('startTutorial');
        const configPanel = document.getElementById('configPanel');
        const serverConfigForm = document.getElementById('serverConfig');
        const createModelBtn = document.getElementById('createModel');
        const createProviderBtn = document.getElementById('createProvider');
        const bindModelBtn = document.getElementById('bindModel');
        const logPanel = document.getElementById('logPanel');

        // Load saved state
        function loadState() {
            const savedState = localStorage.getItem('mcpSimulationState');
            if (savedState) {
                const state = JSON.parse(savedState);
                currentStep = state.currentStep;
                serverConfigured = state.serverConfigured;
                models = state.models;
                providers = state.providers;
                bindings = state.bindings;
                
                updateTutorial();
                updateUI();
                log('Loaded previous simulation state', 'info');
            }
        }

        // Save state
        function saveState() {
            const state = {
                currentStep,
                serverConfigured,
                models,
                providers,
                bindings
            };
            localStorage.setItem('mcpSimulationState', JSON.stringify(state));
        }

        // Log messages
        function log(message, type = 'info') {
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.innerHTML = message;
            logPanel.appendChild(logEntry);
            logPanel.scrollTop = logPanel.scrollHeight;
        }

        // Update tutorial display
        function updateTutorial() {
            const step = tutorialSteps[currentStep];
            tutorialTitle.textContent = step.title;
            tutorialContent.innerHTML = step.content;
            tutorialProgress.textContent = `Step ${currentStep + 1} of ${tutorialSteps.length}`;

            // Update tutorial button
            startTutorialBtn.textContent = step.buttonText || 'Next';
            startTutorialBtn.onclick = () => handleTutorialAction(step.action);
        }

        // Handle tutorial actions
        function handleTutorialAction(action) {
            switch (action) {
                case 'startTutorial':
                    currentStep = 1;
                    updateTutorial();
                    break;
                case 'createModel':
                    const modelName = `Model-${models.length + 1}`;
                    models.push(modelName);
                    log(`Created new model: ${modelName}`, 'success');
                    currentStep++;
                    updateTutorial();
                    break;
                case 'createProvider':
                    const providerName = `Provider-${providers.length + 1}`;
                    providers.push(providerName);
                    log(`Created new context provider: ${providerName}`, 'success');
                    currentStep++;
                    updateTutorial();
                    break;
                case 'configureServer':
                    configPanel.classList.add('active');
                    break;
                case 'bindModel':
                    if (models.length > 0 && providers.length > 0) {
                        const model = models[models.length - 1];
                        const provider = providers[providers.length - 1];
                        bindings.push({ model, provider });
                        log(`Bound ${model} to ${provider}`, 'success');
                        currentStep++;
                        updateTutorial();
                    }
                    break;
                case 'completeTutorial':
                    configPanel.classList.add('active');
                    startTutorialBtn.style.display = 'none';
                    break;
            }
            saveState();
        }

        // Update UI based on state
        function updateUI() {
            createModelBtn.disabled = !serverConfigured;
            createProviderBtn.disabled = !serverConfigured;
            bindModelBtn.disabled = !serverConfigured || models.length === 0 || providers.length === 0;
        }

        // Handle server configuration
        serverConfigForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const formData = new FormData(serverConfigForm);
            const config = {
                allowDynamicBinding: formData.get('allowDynamicBinding') === 'on',
                maxBindings: parseInt(formData.get('maxBindings')),
                enableLogging: formData.get('enableLogging') === 'on'
            };

            serverConfigured = true;
            updateUI();
            log('Server configured successfully', 'success');
            log(`Configuration: Dynamic Binding ${config.allowDynamicBinding ? 'Enabled' : 'Disabled'}, Max Bindings: ${config.maxBindings}`, 'info');
            
            if (currentStep === 3) { // Server configuration step
                currentStep++;
                updateTutorial();
            }
            saveState();
        });

        // Handle model creation
        createModelBtn.addEventListener('click', () => {
            const modelName = `Model-${models.length + 1}`;
            models.push(modelName);
            log(`Created new model: ${modelName}`, 'success');
            updateUI();
            saveState();
        });

        // Handle provider creation
        createProviderBtn.addEventListener('click', () => {
            const providerName = `Provider-${providers.length + 1}`;
            providers.push(providerName);
            log(`Created new context provider: ${providerName}`, 'success');
            updateUI();
            saveState();
        });

        // Handle model binding
        bindModelBtn.addEventListener('click', () => {
            if (models.length > 0 && providers.length > 0) {
                const model = models[models.length - 1];
                const provider = providers[providers.length - 1];
                bindings.push({ model, provider });
                log(`Bound ${model} to ${provider}`, 'success');
                saveState();
            }
        });

        // Handle reset
        document.getElementById('resetSimulation').addEventListener('click', () => {
            currentStep = 0;
            serverConfigured = false;
            models = [];
            providers = [];
            bindings = [];
            logPanel.innerHTML = '';
            log('Simulation reset', 'info');
            updateTutorial();
            updateUI();
            saveState();
        });

        // Initialize
        loadState();
        updateTutorial();
    </script>
</body>
</html> 